{
  "analysis": {
    "filter": {
      "ids": {
        "type": "pattern_capture",
        "preserve_original": 1,
        "patterns": [
          "((?:\\d{1,4}(?:\\:\\d{1,}|\\s(?:s|ref|nr)\\.?\\s+\\d{1,})))",
          "((?:\\w{2,3})\\s*\\d{1,4}(?:\\:\\d{1,}|\\s(?:s|ref|nr)\\.?\\s+\\d{1,}))"
        ]
      },
      "SFS_nr_id_map_back": {
        "type": "pattern_replace",
        "pattern": "(\\d{4})colon(\\d{1,})",
        "replacement": "$1:$2"
      },
      "SFS_id_map_back": {
        "type": "pattern_replace",
        "pattern": "(SFS)_(\\d{4})colon(\\d{1,})",
        "replacement": "$1 $2:$3"
      },
      "swedish_stop": {
        "type": "stop",
        "stopwords": "_swedish_"
      },
      "swedish_stemmer": {
        "type": "stemmer",
        "language": "swedish"
      }
    },
    "char_filter": {
      "SFS_nr_id_map": {
        "type": "pattern_replace",
        "pattern": "(\\d{4}):(\\d{1,})",
        "replacement": "$1colon$2"
      },
      "SFS_id_map": {
        "type": "pattern_replace",
        "pattern": "(SFS)\\s(\\d{4}):(\\d{1,})",
        "replacement": "$1_$2colon$3"
      }
    },
    "analyzer": {
      "identifiers": {
        "tokenizer": "keyword",
        "filter": [
          "ids",
          "lowercase",
          "unique"
        ]
      },
      "malnummer": {
        "tokenizer": "keyword",
        "filter": ["lowercase"]
      },
      "swedish_with_sfs_ids": {
        "tokenizer": "standard",
        "char_filter": [
          "SFS_id_map",
          "SFS_nr_id_map"
        ],
        "filter": [
          "swedish_stop",
          "swedish_stemmer",
          "SFS_id_map_back",
          "SFS_nr_id_map_back",
          "lowercase"
        ]
      }
    }
  }
}